---
description: WillChat 前端（Vue 3/shadcn-vue）架构约束
alwaysApply: false
---

# Vue 3 前端编码约束

## 技术栈

Vue 3 + TypeScript + Vite + TailwindCSS v4 + shadcn-vue + Pinia + vue-i18n

## 目录职责

当你需要创建或修改前端代码时，遵循以下目录约定：

- `src/components/ui/` — shadcn-vue 组件（只能通过 CLI 添加，不要手写）
- `src/components/layout/` — 布局组件
- `src/components/` — 其他业务组件
- `src/composables/` — 组合式函数 `useXxx`
- `src/stores/` — Pinia stores，命名 `useXxxStore`
- `src/locales/` — 语言包 `zh-CN.ts` / `en-US.ts`
- `src/lib/` — 工具函数
- `src/assets/` — 静态资源、全局样式

## 必须遵守

1. **所有组件**：使用 `<script setup lang="ts">`，不用 Options API
2. **导入路径**：始终用 `@/` 别名，如 `import { Button } from '@/components/ui/button'`
3. **样式**：用 Tailwind 类名，颜色用 shadcn 语义变量（`bg-background`、`text-foreground`、`text-muted-foreground` 等）
4. **条件类名**：用 `cn()` 函数合并，如 `cn('text-sm', disabled && 'opacity-50')`
5. **添加 UI 组件**：运行 `npx shadcn-vue@latest add [组件名]`
6. **翻译文本**：用 `const { t } = useI18n()`，key 格式 `模块.功能`
7. **调用后端**：从 `@bindings/...` 导入，必须处理错误

## 禁止

- 不要手动在 `src/components/ui/` 创建文件，必须用 shadcn CLI
- 不要写内联 style，用 Tailwind 类名
- 不要用相对路径 `../../`，用 `@/` 别名
- 不要硬编码用户可见文本，必须走 i18n
- 不要直接写颜色值如 `text-gray-500`，用语义变量 `text-muted-foreground`

## 代码模式

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { useI18n } from 'vue-i18n'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'
import { useAppStore } from '@/stores'

const { t } = useI18n()
const appStore = useAppStore()

defineProps<{
  title: string
  disabled?: boolean
}>()
</script>

<template>
  <div class="flex items-center gap-2 bg-background text-foreground">
    <Button :class="cn('w-full', disabled && 'opacity-50')">
      {{ t('button.submit') }}
    </Button>
  </div>
</template>
```

## 多窗口

- 主窗口入口：`src/main.ts` + `index.html`
- 子窗口入口：`src/winsnap/main.ts` + `winsnap.html`
- 新窗口需要在 `vite.config.ts` 的 `rollupOptions.input` 添加入口
